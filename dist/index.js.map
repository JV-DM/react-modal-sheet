{"version":3,"sources":["../src/constants.ts","../src/hooks.tsx","../src/context.tsx","../src/utils.ts","../src/use-prevent-scroll.ts","../src/styles.ts","../src/sheet.tsx","../src/SheetContainer.tsx","../src/SheetContent.tsx","../src/SheetHeader.tsx","../src/SheetBackdrop.tsx","../src/SheetScroller.tsx","../src/index.tsx"],"names":["useEffect","useLayoutEffect","useRef","transform","useCallback","useState","createContext","useContext","React","isScrollable","forwardRef","useMotionValue","useReducedMotion","useTransform","animate","useImperativeHandle","useMemo","dragProps","motion","AnimatePresence","Children","cloneElement","createPortal","Sheet"],"mappings":"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","file":"index.js","sourcesContent":["export const MAX_HEIGHT = 'calc(100% - env(safe-area-inset-top) - 34px)';\n\nexport const IS_SSR = typeof window === 'undefined';\n\nexport const DEFAULT_TWEEN_CONFIG = {\n  ease: 'easeOut',\n  duration: 0.2,\n};\n\nexport const REDUCED_MOTION_TWEEN_CONFIG = {\n  ease: 'linear',\n  duration: 0.01,\n};\n\nexport const DEFAULT_DRAG_CLOSE_THRESHOLD = 0.6;\n\nexport const DEFAULT_DRAG_VELOCITY_THRESHOLD = 500;\n","import {\n  type RefObject,\n  useCallback,\n  useEffect,\n  useLayoutEffect,\n  useRef,\n  useState,\n} from 'react';\n\nimport { type MotionValue, type BoundingBox, transform } from 'motion/react';\n\nimport { IS_SSR } from './constants';\nimport { type SheetEvents } from './types';\n\nexport const useIsomorphicLayoutEffect = IS_SSR ? useEffect : useLayoutEffect;\n\nexport function useModalEffect({\n  y,\n  rootId,\n  sheetRef,\n  useInset = true,\n}: {\n  y: MotionValue<number>;\n  rootId?: string;\n  sheetRef: RefObject<HTMLDivElement | null>;\n  useInset?: boolean;\n}) {\n  const heightRef = useRef(IS_SSR ? 0 : window.innerHeight);\n\n  function setup() {\n    const root = document.querySelector(`#${rootId}`) as HTMLDivElement;\n    const body = document.querySelector('body') as HTMLBodyElement;\n    if (!root) return;\n\n    body.style.backgroundColor = '#000';\n    root.style.overflow = 'hidden';\n    root.style.transitionTimingFunction = 'cubic-bezier(0.32, 0.72, 0, 1)';\n    root.style.transitionProperty = 'transform, border-radius';\n    root.style.transitionDuration = '0.5s';\n    root.style.transformOrigin = 'center top';\n  }\n\n  function cleanup() {\n    const root = document.querySelector(`#${rootId}`) as HTMLDivElement;\n    const body = document.querySelector('body') as HTMLBodyElement;\n    if (!root) return;\n\n    setTimeout(() => {\n      body.style.removeProperty('background-color');\n      root.style.removeProperty('overflow');\n      root.style.removeProperty('transition-timing-function');\n      root.style.removeProperty('transition-property');\n      root.style.removeProperty('transition-duration');\n      root.style.removeProperty('transform-origin');\n      root.style.removeProperty('transform');\n      root.style.removeProperty('border-top-right-radius');\n      root.style.removeProperty('border-top-left-radius');\n    }, 100);\n  }\n\n  useIsomorphicLayoutEffect(() => {\n    return () => {\n      if (rootId) cleanup();\n    };\n  }, []);\n\n  useEffect(() => {\n    const root = document.querySelector(`#${rootId}`) as HTMLDivElement;\n    if (!root) return;\n\n    function onCompleted() {\n      if (y.get() - 10 >= heightRef.current) cleanup();\n    }\n\n    const removeStartListener = y.on('animationStart', () => {\n      heightRef.current = sheetRef.current?.offsetHeight || window.innerHeight;\n      setup();\n    });\n\n    const removeChangeListener = y.on('change', (value) => {\n      if (root) {\n        const progress = Math.max(0, 1 - value / heightRef.current);\n        const pageWidth = window.innerWidth;\n        const scale = (pageWidth - 16) / pageWidth;\n        const ty = transform(progress, [0, 1], [0, 24]);\n        const s = transform(progress, [0, 1], [1, scale]);\n        const borderRadius = transform(progress, [0, 1], [0, 10]);\n        const inset = useInset\n          ? `env(safe-area-inset-top) * ${progress}`\n          : '0px';\n\n        root.style.transform = `scale(${s}) translate3d(0, calc(${inset} + ${ty}px), 0)`; // prettier-ignore\n        root.style.borderTopRightRadius = `${borderRadius}px`;\n        root.style.borderTopLeftRadius = `${borderRadius}px`;\n      }\n    });\n\n    const removeCompleteListener = y.on('animationComplete', onCompleted);\n    const removeCancelListener = y.on('animationCancel', onCompleted);\n\n    return () => {\n      removeStartListener();\n      removeChangeListener();\n      removeCompleteListener();\n      removeCancelListener();\n    };\n  }, [y, rootId]);\n}\n\nexport function useEventCallbacks(\n  isOpen: boolean,\n  callbacks: RefObject<SheetEvents>\n) {\n  const prevOpen = usePrevious(isOpen);\n  const didOpen = useRef(false);\n\n  // Because of AnimatePrecence we don't have access to latest isOpen value\n  // so we need to read and write to a ref to determine if we are\n  // opening or closing the sheet\n  const handleAnimationComplete = useCallback(() => {\n    if (!didOpen.current) {\n      callbacks.current.onOpenEnd?.();\n      didOpen.current = true;\n    } else {\n      callbacks.current.onCloseEnd?.();\n      didOpen.current = false;\n    }\n  }, [isOpen, prevOpen]);\n\n  useEffect(() => {\n    if (!prevOpen && isOpen) {\n      callbacks.current.onOpenStart?.();\n    } else if (!isOpen && prevOpen) {\n      callbacks.current.onCloseStart?.();\n    }\n  }, [isOpen, prevOpen]);\n\n  return { handleAnimationComplete };\n}\n\nexport function useDimensions() {\n  const [dimensions, setDimensions] = useState({\n    height: !IS_SSR ? window.innerHeight : 0,\n    width: !IS_SSR ? window.innerWidth : 0,\n  });\n\n  useIsomorphicLayoutEffect(() => {\n    function handler() {\n      setDimensions({\n        height: window.innerHeight,\n        width: window.innerWidth,\n      });\n    }\n\n    handler();\n\n    window.addEventListener('resize', handler);\n\n    return () => {\n      window.removeEventListener('resize', handler);\n    };\n  }, []);\n\n  return dimensions;\n}\n\nexport function usePrevious<T>(state: T): T | undefined {\n  const ref = useRef<T>(undefined);\n\n  useEffect(() => {\n    ref.current = state;\n  });\n\n  return ref.current;\n}\n\n// Userland version of the `useEffectEvent` React hook:\n// RFC: https://react.dev/reference/react/experimental_useEffectEvent\nexport function useEffectEvent<T extends (...args: any[]) => any>(handler: T) {\n  const handlerRef = useRef<T>(undefined);\n\n  useIsomorphicLayoutEffect(() => {\n    handlerRef.current = handler;\n  });\n\n  return useCallback((...args: any[]) => {\n    const fn = handlerRef.current;\n    return fn?.(...args);\n  }, []) as T;\n}\n\n// This is a hacky way to fix a bug in motion/react where the drag\n// constraints are not updated when window is resized.\n// https://github.com/framer/motion/issues/1659\nconst constraints: BoundingBox = { bottom: 0, top: 0, left: 0, right: 0 };\n\nexport function useDragConstraints() {\n  const constraintsRef = useRef<any>(null);\n  const onMeasureDragConstraints = useCallback(() => constraints, []);\n  return { constraintsRef, onMeasureDragConstraints };\n}\n","import React, {\n  type ReactNode,\n  createContext,\n  useContext,\n  useState,\n} from 'react';\nimport { type SheetScrollerContextType, type SheetContextType } from './types';\n\nexport const SheetContext = createContext<SheetContextType | undefined>(\n  undefined\n);\n\nexport const useSheetContext = () => {\n  const context = useContext(SheetContext);\n  if (!context) throw new Error('Sheet context error');\n  return context;\n};\n\nexport const SheetScrollerContext = createContext<\n  SheetScrollerContextType | undefined\n>(undefined);\n\nexport function SheetScrollerContextProvider({\n  children,\n}: {\n  children: ReactNode;\n}) {\n  const sheetContext = useSheetContext();\n  const [disableDrag, setDisableDrag] = useState(!!sheetContext.disableDrag);\n\n  function setDragEnabled() {\n    if (!sheetContext.disableDrag) setDisableDrag(false);\n  }\n\n  function setDragDisabled() {\n    if (!disableDrag) setDisableDrag(true);\n  }\n\n  return (\n    <SheetScrollerContext.Provider\n      value={{ disableDrag, setDragEnabled, setDragDisabled }}\n    >\n      {children}\n    </SheetScrollerContext.Provider>\n  );\n}\n\nexport const useSheetScrollerContext = () => {\n  const context = useContext(SheetScrollerContext);\n  if (!context) throw new Error('Sheet scroller context error');\n  return context;\n};\n","import { type ForwardedRef, type RefCallback } from 'react';\n\nexport function getClosest(nums: number[], goal: number) {\n  let closest = nums[0];\n  let minDifference = Math.abs(nums[0] - goal);\n\n  for (let i = 1; i < nums.length; i++) {\n    const difference = Math.abs(nums[i] - goal);\n    if (difference < minDifference) {\n      closest = nums[i];\n      minDifference = difference;\n    }\n  }\n\n  return closest;\n}\n\nexport function inDescendingOrder(arr: number[]) {\n  for (let i = 0; i < arr.length; i++) {\n    if (arr[i + 1] > arr[i]) return false;\n  }\n\n  return true;\n}\n\nexport function validateSnapTo({\n  snapTo,\n  sheetHeight,\n}: {\n  snapTo: number;\n  sheetHeight: number;\n}) {\n  if (snapTo < 0) {\n    console.warn(\n      `Snap point is out of bounds. Sheet height is ${sheetHeight} but snap point is ${\n        sheetHeight + Math.abs(snapTo)\n      }.`\n    );\n  }\n\n  return Math.max(Math.round(snapTo), 0);\n}\n\nexport function mergeRefs<T = any>(refs: ForwardedRef<T>[]): RefCallback<T> {\n  return (value: any) => {\n    refs.forEach((ref: any) => {\n      if (typeof ref === 'function') {\n        ref(value);\n      } else if (ref) {\n        ref.current = value;\n      }\n    });\n  };\n}\n\nexport function isTouchDevice() {\n  if (typeof window === 'undefined') return false;\n  return 'ontouchstart' in window || navigator.maxTouchPoints > 0;\n}\n\nfunction testPlatform(re: RegExp) {\n  return typeof window !== 'undefined' && window.navigator != null\n    ? re.test(\n        // @ts-expect-error\n        window.navigator.userAgentData?.platform || window.navigator.platform\n      )\n    : false;\n}\n\nfunction cached(fn: () => boolean) {\n  let res: boolean | null = null;\n  return () => {\n    if (res == null) {\n      res = fn();\n    }\n    return res;\n  };\n}\n\nconst isMac = cached(function () {\n  return testPlatform(/^Mac/i);\n});\n\nconst isIPhone = cached(function () {\n  return testPlatform(/^iPhone/i);\n});\n\nconst isIPad = cached(function () {\n  return (\n    testPlatform(/^iPad/i) ||\n    // iPadOS 13 lies and says it's a Mac, but we can distinguish by detecting touch support.\n    (isMac() && navigator.maxTouchPoints > 1)\n  );\n});\n\nexport const isIOS = cached(function () {\n  return isIPhone() || isIPad();\n});\n","// This code originates from https://github.com/adobe/react-spectrum/blob/main/packages/%40react-aria/overlays/src/usePreventScroll.ts\n\nimport { useIsomorphicLayoutEffect } from './hooks';\nimport { isIOS } from './utils';\n\nconst KEYBOARD_BUFFER = 24;\n\ninterface PreventScrollOptions {\n  /** Whether the scroll lock is disabled. */\n  isDisabled?: boolean;\n}\n\nfunction chain(...callbacks: any[]): (...args: any[]) => void {\n  return (...args: any[]) => {\n    for (const callback of callbacks) {\n      if (typeof callback === 'function') {\n        callback(...args);\n      }\n    }\n  };\n}\n\nconst visualViewport = typeof document !== 'undefined' && window.visualViewport;\n\nexport function isScrollable(\n  node: Element | null,\n  checkForOverflow?: boolean\n): boolean {\n  if (!node) {\n    return false;\n  }\n\n  const style = window.getComputedStyle(node);\n\n  let isScrollable = /(auto|scroll)/.test(\n    style.overflow + style.overflowX + style.overflowY\n  );\n\n  if (isScrollable && checkForOverflow) {\n    isScrollable =\n      node.scrollHeight !== node.clientHeight ||\n      node.scrollWidth !== node.clientWidth;\n  }\n\n  return isScrollable;\n}\n\nexport function getScrollParent(\n  node: Element,\n  checkForOverflow?: boolean\n): Element {\n  let scrollableNode: Element | null = node;\n\n  if (isScrollable(scrollableNode, checkForOverflow)) {\n    scrollableNode = scrollableNode.parentElement;\n  }\n\n  while (scrollableNode && !isScrollable(scrollableNode, checkForOverflow)) {\n    scrollableNode = scrollableNode.parentElement;\n  }\n\n  return (\n    scrollableNode || document.scrollingElement || document.documentElement\n  );\n}\n\n// HTML input types that do not cause the software keyboard to appear.\nconst nonTextInputTypes = new Set([\n  'checkbox',\n  'radio',\n  'range',\n  'color',\n  'file',\n  'image',\n  'button',\n  'submit',\n  'reset',\n]);\n\n// The number of active usePreventScroll calls. Used to determine whether to revert back to the original page style/scroll position\nlet preventScrollCount = 0;\nlet restore: () => void;\n\n/**\n * Prevents scrolling on the document body on mount, and\n * restores it on unmount. Also ensures that content does not\n * shift due to the scrollbars disappearing.\n */\nexport function usePreventScroll(options: PreventScrollOptions = {}) {\n  const { isDisabled } = options;\n\n  useIsomorphicLayoutEffect(() => {\n    if (isDisabled) {\n      return;\n    }\n\n    preventScrollCount++;\n    if (preventScrollCount === 1) {\n      if (isIOS()) {\n        restore = preventScrollMobileSafari();\n      } else {\n        restore = preventScrollStandard();\n      }\n    }\n\n    return () => {\n      preventScrollCount--;\n      if (preventScrollCount === 0) {\n        restore?.();\n      }\n    };\n  }, [isDisabled]);\n}\n\n// For most browsers, all we need to do is set `overflow: hidden` on the root element, and\n// add some padding to prevent the page from shifting when the scrollbar is hidden.\nfunction preventScrollStandard() {\n  return chain(\n    setStyle(\n      document.documentElement,\n      'paddingRight',\n      `${window.innerWidth - document.documentElement.clientWidth}px`\n    ),\n    setStyle(document.documentElement, 'overflow', 'hidden')\n  );\n}\n\n// Mobile Safari is a whole different beast. Even with overflow: hidden,\n// it still scrolls the page in many situations:\n//\n// 1. When the bottom toolbar and address bar are collapsed, page scrolling is always allowed.\n// 2. When the keyboard is visible, the viewport does not resize. Instead, the keyboard covers part of\n//    it, so it becomes scrollable.\n// 3. When tapping on an input, the page always scrolls so that the input is centered in the visual viewport.\n//    This may cause even fixed position elements to scroll off the screen.\n// 4. When using the next/previous buttons in the keyboard to navigate between inputs, the whole page always\n//    scrolls, even if the input is inside a nested scrollable element that could be scrolled instead.\n//\n// In order to work around these cases, and prevent scrolling without jankiness, we do a few things:\n//\n// 1. Prevent default on `touchmove` events that are not in a scrollable element. This prevents touch scrolling\n//    on the window.\n// 2. Prevent default on `touchmove` events inside a scrollable element when the scroll position is at the\n//    top or bottom. This avoids the whole page scrolling instead, but does prevent overscrolling.\n// 3. Prevent default on `touchend` events on input elements and handle focusing the element ourselves.\n// 4. When focusing an input, apply a transform to trick Safari into thinking the input is at the top\n//    of the page, which prevents it from scrolling the page. After the input is focused, scroll the element\n//    into view ourselves, without scrolling the whole page.\n// 5. Offset the body by the scroll position using a negative margin and scroll to the top. This should appear the\n//    same visually, but makes the actual scroll position always zero. This is required to make all of the\n//    above work or Safari will still try to scroll the page when focusing an input.\n// 6. As a last resort, handle window scroll events, and scroll back to the top. This can happen when attempting\n//    to navigate to an input with the next/previous buttons that's outside a modal.\nfunction preventScrollMobileSafari() {\n  let scrollable: Element | undefined;\n  let lastY = 0;\n\n  const onTouchStart = (e: TouchEvent) => {\n    // Use `composedPath` to support shadow DOM.\n    const target = e.composedPath()?.[0] as HTMLElement;\n\n    // Store the nearest scrollable parent element from the element that the user touched.\n    scrollable = getScrollParent(target, true);\n\n    if (\n      scrollable === document.documentElement &&\n      scrollable === document.body\n    ) {\n      return;\n    }\n\n    lastY = e.changedTouches[0].pageY;\n  };\n\n  const onTouchMove = (e: TouchEvent) => {\n    // In special situations, `onTouchStart` may be called without `onTouchStart` being called.\n    // (e.g. when the user places a finger on the screen before the <Sheet> is mounted and then moves the finger after it is mounted).\n    // If `onTouchStart` is not called, `scrollable` is `undefined`. Therefore, such cases are ignored.\n    if (scrollable === undefined) {\n      return;\n    }\n\n    // Prevent scrolling the window.\n    if (\n      !scrollable ||\n      scrollable === document.documentElement ||\n      scrollable === document.body\n    ) {\n      e.preventDefault();\n      return;\n    }\n\n    // Prevent scrolling up when at the top and scrolling down when at the bottom\n    // of a nested scrollable area, otherwise mobile Safari will start scrolling\n    // the window instead. Unfortunately, this disables bounce scrolling when at\n    // the top but it's the best we can do.\n    const y = e.changedTouches[0].pageY;\n    const scrollTop = scrollable.scrollTop;\n    const bottom = scrollable.scrollHeight - scrollable.clientHeight;\n\n    if (bottom === 0) {\n      return;\n    }\n\n    if ((scrollTop <= 0 && y > lastY) || (scrollTop >= bottom && y < lastY)) {\n      e.preventDefault();\n    }\n\n    lastY = y;\n  };\n\n  const onTouchEnd = (e: TouchEvent) => {\n    // Use `composedPath` to support shadow DOM.\n    const target = e.composedPath()?.[0] as HTMLElement;\n\n    // Apply this change if we're not already focused on the target element\n    if (willOpenKeyboard(target) && target !== document.activeElement) {\n      e.preventDefault();\n\n      // Apply a transform to trick Safari into thinking the input is at the top of the page\n      // so it doesn't try to scroll it into view. When tapping on an input, this needs to\n      // be done before the \"focus\" event, so we have to focus the element ourselves.\n      target.style.transform = 'translateY(-2000px)';\n      target.focus();\n      requestAnimationFrame(() => {\n        target.style.transform = '';\n      });\n    }\n  };\n\n  const onFocus = (e: FocusEvent) => {\n    // Use `composedPath` to support shadow DOM.\n    const target = e.composedPath()?.[0] as HTMLElement;\n\n    if (willOpenKeyboard(target)) {\n      // Transform also needs to be applied in the focus event in cases where focus moves\n      // other than tapping on an input directly, e.g. the next/previous buttons in the\n      // software keyboard. In these cases, it seems applying the transform in the focus event\n      // is good enough, whereas when tapping an input, it must be done before the focus event. 🤷‍♂️\n      target.style.transform = 'translateY(-2000px)';\n      requestAnimationFrame(() => {\n        target.style.transform = '';\n\n        // This will have prevented the browser from scrolling the focused element into view,\n        // so we need to do this ourselves in a way that doesn't cause the whole page to scroll.\n        if (visualViewport) {\n          if (visualViewport.height < window.innerHeight) {\n            // If the keyboard is already visible, do this after one additional frame\n            // to wait for the transform to be removed.\n            requestAnimationFrame(() => {\n              scrollIntoView(target);\n            });\n          } else {\n            // Otherwise, wait for the visual viewport to resize before scrolling so we can\n            // measure the correct position to scroll to.\n            visualViewport.addEventListener(\n              'resize',\n              () => scrollIntoView(target),\n              { once: true }\n            );\n          }\n        }\n      });\n    }\n  };\n\n  const onWindowScroll = () => {\n    // Last resort. If the window scrolled, scroll it back to the top.\n    // It should always be at the top because the body will have a negative margin (see below).\n    window.scrollTo(0, 0);\n  };\n\n  // Record the original scroll position so we can restore it.\n  // Then apply a negative margin to the body to offset it by the scroll position. This will\n  // enable us to scroll the window to the top, which is required for the rest of this to work.\n  const scrollX = window.pageXOffset;\n  const scrollY = window.pageYOffset;\n\n  const restoreStyles = chain(\n    setStyle(\n      document.documentElement,\n      'paddingRight',\n      `${window.innerWidth - document.documentElement.clientWidth}px`\n    ),\n    setStyle(document.documentElement, 'overflow', 'hidden'),\n    setStyle(document.body, 'marginTop', `-${scrollY}px`)\n  );\n\n  // Scroll to the top. The negative margin on the body will make this appear the same.\n  window.scrollTo(0, 0);\n\n  const removeEvents = chain(\n    addEvent(document, 'touchstart', onTouchStart, {\n      passive: false,\n      capture: true,\n    }),\n    addEvent(document, 'touchmove', onTouchMove, {\n      passive: false,\n      capture: true,\n    }),\n    addEvent(document, 'touchend', onTouchEnd, {\n      passive: false,\n      capture: true,\n    }),\n    addEvent(document, 'focus', onFocus, true),\n    addEvent(window, 'scroll', onWindowScroll)\n  );\n\n  return () => {\n    // Restore styles and scroll the page back to where it was.\n    restoreStyles();\n    removeEvents();\n    window.scrollTo(scrollX, scrollY);\n  };\n}\n\n// Sets a CSS property on an element, and returns a function to revert it to the previous value.\nfunction setStyle(element: any, style: string, value: string) {\n  // https://github.com/microsoft/TypeScript/issues/17827#issuecomment-391663310\n  const cur = element.style[style];\n  element.style[style] = value;\n\n  return () => {\n    element.style[style] = cur;\n  };\n}\n\n// Adds an event listener to an element, and returns a function to remove it.\nfunction addEvent<K extends keyof GlobalEventHandlersEventMap>(\n  target: EventTarget,\n  event: K,\n  handler: (this: Document, ev: GlobalEventHandlersEventMap[K]) => any,\n  options?: boolean | AddEventListenerOptions\n) {\n  // @ts-expect-error\n  target.addEventListener(event, handler, options);\n\n  return () => {\n    // @ts-expect-error\n    target.removeEventListener(event, handler, options);\n  };\n}\n\nfunction scrollIntoView(target: Element) {\n  const root = document.scrollingElement || document.documentElement;\n  while (target && target !== root) {\n    // Find the parent scrollable element and adjust the scroll position if the target is not already in view.\n    const scrollable = getScrollParent(target);\n    if (\n      scrollable !== document.documentElement &&\n      scrollable !== document.body &&\n      scrollable !== target\n    ) {\n      const scrollableTop = scrollable.getBoundingClientRect().top;\n      const targetTop = target.getBoundingClientRect().top;\n      const targetBottom = target.getBoundingClientRect().bottom;\n      // Buffer is needed for some edge cases\n      const keyboardHeight =\n        scrollable.getBoundingClientRect().bottom + KEYBOARD_BUFFER;\n\n      if (targetBottom > keyboardHeight) {\n        scrollable.scrollTop += targetTop - scrollableTop;\n      }\n    }\n\n    // @ts-expect-error\n    target = scrollable.parentElement;\n  }\n}\n\nfunction willOpenKeyboard(target: Element) {\n  return (\n    (target instanceof HTMLInputElement &&\n      !nonTextInputTypes.has(target.type)) ||\n    target instanceof HTMLTextAreaElement ||\n    (target instanceof HTMLElement && target.isContentEditable)\n  );\n}\n","import { type Properties } from 'csstype';\n\nexport const styles: Record<string, Properties> = {\n  wrapper: {\n    position: 'fixed',\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0,\n    overflow: 'hidden',\n    pointerEvents: 'none',\n  },\n  backdrop: {\n    zIndex: 1,\n    position: 'fixed',\n    top: 0,\n    left: 0,\n    width: '100%',\n    height: '100%',\n    backgroundColor: 'rgba(0, 0, 0, 0.2)',\n    touchAction: 'none', // Disable iOS body scrolling\n    border: 'none',\n    WebkitTapHighlightColor: 'transparent',\n  },\n  container: {\n    zIndex: 2,\n    position: 'absolute',\n    left: 0,\n    bottom: 0,\n    width: '100%',\n    backgroundColor: '#fff',\n    borderTopRightRadius: '8px',\n    borderTopLeftRadius: '8px',\n    boxShadow: '0px -2px 16px rgba(0, 0, 0, 0.3)',\n    display: 'flex',\n    flexDirection: 'column',\n    pointerEvents: 'auto',\n  },\n  headerWrapper: {\n    width: '100%',\n  },\n  header: {\n    height: '40px',\n    width: '100%',\n    position: 'relative',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  indicator: {\n    width: '18px',\n    height: '4px',\n    borderRadius: '99px',\n    backgroundColor: '#ddd',\n  },\n  content: {\n    flexGrow: 1,\n    display: 'flex',\n    flexDirection: 'column',\n    minHeight: '0px',\n    position: 'relative',\n  },\n  scroller: {\n    height: '100%',\n    overflowY: 'auto',\n  },\n};\n","import React, {\n  Children,\n  cloneElement,\n  forwardRef,\n  useEffect,\n  useImperativeHandle,\n  useMemo,\n  useRef,\n} from 'react';\n\nimport { createPortal } from 'react-dom';\n\nimport {\n  animate,\n  AnimatePresence,\n  motion,\n  type PanInfo,\n  type Transition,\n  useMotionValue,\n  useReducedMotion,\n  useTransform,\n} from 'motion/react';\n\nimport {\n  useModalEffect,\n  useDimensions,\n  useIsomorphicLayoutEffect,\n  useEffectEvent,\n} from './hooks';\n\nimport {\n  REDUCED_MOTION_TWEEN_CONFIG,\n  DEFAULT_TWEEN_CONFIG,\n  DEFAULT_DRAG_CLOSE_THRESHOLD,\n  DEFAULT_DRAG_VELOCITY_THRESHOLD,\n  IS_SSR,\n} from './constants';\n\nimport { type SheetContextType, type SheetProps } from './types';\nimport { SheetScrollerContextProvider, SheetContext } from './context';\nimport { getClosest, inDescendingOrder, validateSnapTo } from './utils';\nimport { usePreventScroll } from './use-prevent-scroll';\nimport { styles } from './styles';\n\nexport const Sheet = forwardRef<any, SheetProps>(\n  (\n    {\n      onOpenStart,\n      onOpenEnd,\n      onClose,\n      onCloseStart,\n      onCloseEnd,\n      onSnap,\n      children,\n      disableScrollLocking = false,\n      isOpen,\n      snapPoints: snapPointsProp,\n      rootId,\n      mountPoint,\n      style,\n      detent = 'full-height',\n      initialSnap = 0,\n      disableDrag = false,\n      prefersReducedMotion = false,\n      tweenConfig = DEFAULT_TWEEN_CONFIG,\n      dragVelocityThreshold = DEFAULT_DRAG_VELOCITY_THRESHOLD,\n      dragCloseThreshold = DEFAULT_DRAG_CLOSE_THRESHOLD,\n      useInset,\n      ...rest\n    },\n    ref\n  ) => {\n    const sheetRef = useRef<HTMLDivElement>(null);\n    const indicatorRotation = useMotionValue(0);\n    const { height: windowHeight } = useDimensions();\n    const shouldReduceMotion = useReducedMotion();\n    const reduceMotion = Boolean(prefersReducedMotion || shouldReduceMotion);\n    const animationOptions: Transition = {\n      type: 'tween',\n      ...(reduceMotion ? REDUCED_MOTION_TWEEN_CONFIG : tweenConfig),\n    };\n\n    // NOTE: the inital value for `y` doesn't matter since it is overwritten by\n    // the value driven by the `AnimatePresence` component when the sheet is opened\n    // and after that it is driven by the gestures and/or snapping\n    const y = useMotionValue(windowHeight);\n\n    // +2 for tolerance in case the animated value is slightly off\n    const zIndex = useTransform(y, (value) =>\n      value + 2 >= windowHeight ? -1 : (style?.zIndex ?? 9999)\n    );\n    const visibility = useTransform(y, (value) =>\n      value + 2 >= windowHeight ? 'hidden' : 'visible'\n    );\n\n    // Keep the callback fns up-to-date so that they can be accessed inside\n    // the effect without including them to the dependencies array\n    const callbacks = useRef({\n      onOpenStart,\n      onOpenEnd,\n      onCloseStart,\n      onCloseEnd,\n    });\n\n    useIsomorphicLayoutEffect(() => {\n      callbacks.current = {\n        onOpenStart,\n        onOpenEnd,\n        onCloseStart,\n        onCloseEnd,\n      };\n    });\n\n    let snapPoints: number[] | undefined = snapPointsProp;\n\n    if (snapPoints) {\n      // Convert negative / percentage snap points to absolute values\n      snapPoints = snapPoints.map((point) => {\n        // Percentage values e.g. between 0.0 and 1.0\n        if (point > 0 && point <= 1) return Math.round(point * windowHeight);\n        return point < 0 ? windowHeight + point : point; // negative values\n      });\n\n      console.assert(\n        inDescendingOrder(snapPoints) || windowHeight === 0,\n        `Snap points need to be in descending order got: [${snapPoints.join(\n          ', '\n        )}]`\n      );\n    }\n\n    const onDrag = useEffectEvent((_, { delta }: PanInfo) => {\n      // Update drag indicator rotation based on drag velocity\n      const velocity = y.getVelocity();\n\n      if (velocity > 0) indicatorRotation.set(10);\n      if (velocity < 0) indicatorRotation.set(-10);\n\n      // Make sure user cannot drag beyond the top of the sheet\n      y.set(Math.max(y.get() + delta.y, 0));\n    });\n\n    const onDragStart = useEffectEvent(() => {\n      // Find focused input inside the sheet and blur it when dragging starts\n      // to prevent a weird ghost caret \"bug\" on mobile\n      const focusedElement = document.activeElement as HTMLElement | null;\n      if (!focusedElement || !sheetRef.current) return;\n\n      const isInput =\n        focusedElement.tagName === 'INPUT' ||\n        focusedElement.tagName === 'TEXTAREA';\n\n      // Only blur the focused element if it's inside the sheet\n      if (isInput && sheetRef.current.contains(focusedElement)) {\n        focusedElement.blur();\n      }\n    });\n\n    const onDragEnd = useEffectEvent((_, { velocity }: PanInfo) => {\n      if (velocity.y > dragVelocityThreshold) {\n        // User flicked the sheet down\n        onClose();\n      } else {\n        // biome-ignore lint/style/noNonNullAssertion: ref should be defined here\n        const sheetHeight = sheetRef.current!.getBoundingClientRect().height;\n        const currentY = y.get();\n\n        let snapTo = 0;\n\n        if (snapPoints) {\n          const snapToValues = snapPoints.map(\n            (p) => sheetHeight - Math.min(p, sheetHeight)\n          );\n\n          // Allow snapping to the top of the sheet if detent is set to `content-height`\n          if (detent === 'content-height' && !snapToValues.includes(0)) {\n            snapToValues.unshift(0);\n          }\n\n          // Get the closest snap point\n          snapTo = getClosest(snapToValues, currentY);\n        } else if (currentY / sheetHeight > dragCloseThreshold) {\n          // Close if dragged over enough far\n          snapTo = sheetHeight;\n        }\n\n        snapTo = validateSnapTo({ snapTo, sheetHeight });\n\n        // Update the spring value so that the sheet is animated to the snap point\n        animate(y, snapTo, animationOptions);\n\n        if (snapPoints && onSnap) {\n          const snapValue = Math.abs(Math.round(snapPoints[0] - snapTo));\n          const snapIndex = snapPoints.indexOf(\n            getClosest(snapPoints, snapValue)\n          );\n          onSnap(snapIndex);\n        }\n\n        const roundedSheetHeight = Math.round(sheetHeight);\n        const shouldClose = snapTo + 2 >= roundedSheetHeight; // 2px tolerance\n\n        if (shouldClose) onClose();\n      }\n\n      // Reset indicator rotation after dragging\n      indicatorRotation.set(0);\n    });\n\n    // Trigger onSnap callback when sheet is opened or closed\n    useEffect(() => {\n      if (!snapPoints || !onSnap) return;\n      const snapIndex = isOpen ? initialSnap : snapPoints.length - 1;\n      onSnap(snapIndex);\n    }, [isOpen]);\n\n    useImperativeHandle(ref, () => ({\n      y,\n      snapTo: (snapIndex: number) => {\n        const sheetEl = sheetRef.current;\n\n        if (snapPoints?.[snapIndex] !== undefined && sheetEl) {\n          const sheetHeight = sheetEl.getBoundingClientRect().height;\n          const snapPoint = snapPoints[snapIndex];\n          const snapTo = validateSnapTo({\n            snapTo: sheetHeight - snapPoint,\n            sheetHeight,\n          });\n\n          animate(y, snapTo, animationOptions);\n          if (onSnap) onSnap(snapIndex);\n          if (snapTo >= sheetHeight) onClose();\n        }\n      },\n    }));\n\n    useModalEffect({\n      y,\n      rootId,\n      sheetRef,\n      useInset,\n    });\n\n    // Framer Motion should handle body scroll locking but it's not working\n    // properly on iOS. Scroll locking from React Aria seems to work much better.\n    usePreventScroll({ isDisabled: disableScrollLocking || !isOpen });\n\n    const dragProps = useMemo(() => {\n      const dragProps: SheetContextType['dragProps'] = {\n        drag: 'y',\n        dragElastic: 0,\n        dragMomentum: false,\n        dragPropagation: false,\n        onDrag,\n        onDragStart,\n        onDragEnd,\n      };\n\n      return disableDrag ? undefined : dragProps;\n    }, [disableDrag, windowHeight]);\n\n    const context: SheetContextType = {\n      y,\n      sheetRef,\n      isOpen,\n      initialSnap,\n      snapPoints,\n      detent,\n      indicatorRotation,\n      callbacks,\n      dragProps,\n      windowHeight,\n      animationOptions,\n      reduceMotion,\n      disableDrag,\n    };\n\n    const sheet = (\n      <SheetContext.Provider value={context}>\n        <motion.div\n          {...rest}\n          ref={ref}\n          style={{ ...styles.wrapper, zIndex, visibility, ...style }}\n        >\n          <AnimatePresence>\n            {/* NOTE: AnimatePresence requires us to set keys to children */}\n            {isOpen ? (\n              <SheetScrollerContextProvider>\n                {Children.map(children, (child: any, i) =>\n                  cloneElement(child, { key: `sheet-child-${i}` })\n                )}\n              </SheetScrollerContextProvider>\n            ) : null}\n          </AnimatePresence>\n        </motion.div>\n      </SheetContext.Provider>\n    );\n\n    if (IS_SSR) return sheet;\n\n    return createPortal(sheet, mountPoint ?? document.body);\n  }\n);\n\nSheet.displayName = 'Sheet';\n","import React, { forwardRef } from 'react';\nimport { motion } from 'motion/react';\n\nimport { type SheetContainerProps } from './types';\nimport { useSheetContext } from './context';\nimport { useEventCallbacks } from './hooks';\nimport { MAX_HEIGHT } from './constants';\nimport { mergeRefs } from './utils';\nimport { styles } from './styles';\n\nexport const SheetContainer = forwardRef<any, SheetContainerProps>(\n  ({ children, style = {}, className = '', ...rest }, ref) => {\n    const {\n      y,\n      isOpen,\n      callbacks,\n      snapPoints,\n      initialSnap = 0,\n      sheetRef,\n      windowHeight,\n      detent,\n      animationOptions,\n      reduceMotion,\n    } = useSheetContext();\n\n    const { handleAnimationComplete } = useEventCallbacks(isOpen, callbacks);\n    const initialY = snapPoints ? snapPoints[0] - snapPoints[initialSnap] : 0;\n    const maxSnapHeight = snapPoints ? snapPoints[0] : null;\n\n    const height =\n      maxSnapHeight !== null\n        ? `min(${maxSnapHeight}px, ${MAX_HEIGHT})`\n        : MAX_HEIGHT;\n\n    return (\n      <motion.div\n        {...rest}\n        ref={mergeRefs([sheetRef, ref])}\n        className={`react-modal-sheet-container ${className}`}\n        style={{\n          ...styles.container,\n          ...style,\n          ...(detent === 'full-height' && { height }),\n          ...(detent === 'content-height' && { maxHeight: height }),\n          y,\n        }}\n        initial={reduceMotion ? false : { y: windowHeight }}\n        animate={{ y: initialY, transition: animationOptions }}\n        exit={{ y: windowHeight, transition: animationOptions }}\n        onAnimationComplete={handleAnimationComplete}\n      >\n        {children}\n      </motion.div>\n    );\n  }\n);\n\nSheetContainer.displayName = 'SheetContainer';\n","import React, { forwardRef } from 'react';\nimport { motion } from 'motion/react';\n\nimport { type SheetDraggableProps } from './types';\nimport { useSheetScrollerContext, useSheetContext } from './context';\nimport { useDragConstraints } from './hooks';\nimport { mergeRefs } from './utils';\nimport { styles } from './styles';\n\nexport const SheetContent = forwardRef<any, SheetDraggableProps>(\n  ({ children, style, disableDrag, className = '', ...rest }, ref) => {\n    const sheetContext = useSheetContext();\n    const sheetScrollerContext = useSheetScrollerContext();\n    const { constraintsRef, onMeasureDragConstraints } = useDragConstraints();\n\n    const dragProps =\n      disableDrag || sheetScrollerContext.disableDrag\n        ? undefined\n        : sheetContext.dragProps;\n\n    return (\n      <motion.div\n        {...rest}\n        ref={mergeRefs([ref, constraintsRef])}\n        className={`react-modal-sheet-content ${className}`}\n        style={{ ...styles.content, ...style }}\n        {...dragProps}\n        dragConstraints={constraintsRef}\n        onMeasureDragConstraints={onMeasureDragConstraints}\n      >\n        {children}\n      </motion.div>\n    );\n  }\n);\n\nSheetContent.displayName = 'SheetContent';\n","import React, { forwardRef } from 'react';\nimport { motion, useTransform } from 'motion/react';\n\nimport { type SheetDraggableProps } from './types';\nimport { useSheetContext } from './context';\nimport { useDragConstraints } from './hooks';\nimport { mergeRefs } from './utils';\nimport { styles } from './styles';\n\nexport const SheetHeader = forwardRef<any, SheetDraggableProps>(\n  ({ children, style, disableDrag, ...rest }, ref) => {\n    const { indicatorRotation, dragProps } = useSheetContext();\n    const { constraintsRef, onMeasureDragConstraints } = useDragConstraints();\n    const _dragProps = disableDrag ? undefined : dragProps;\n\n    const indicator1Transform = useTransform(\n      indicatorRotation,\n      (r) => `translateX(2px) rotate(${r}deg)`\n    );\n\n    const indicator2Transform = useTransform(\n      indicatorRotation,\n      (r) => `translateX(-2px) rotate(${-1 * r}deg)`\n    );\n\n    return (\n      <motion.div\n        {...rest}\n        ref={mergeRefs([ref, constraintsRef])}\n        style={{ ...styles.headerWrapper, ...style }}\n        {..._dragProps}\n        dragConstraints={constraintsRef}\n        onMeasureDragConstraints={onMeasureDragConstraints}\n      >\n        {children || (\n          <div className=\"react-modal-sheet-header\" style={styles.header}>\n            <motion.span\n              className=\"react-modal-sheet-drag-indicator\"\n              style={{ ...styles.indicator, transform: indicator1Transform }}\n            />\n            <motion.span\n              className=\"react-modal-sheet-drag-indicator\"\n              style={{ ...styles.indicator, transform: indicator2Transform }}\n            />\n          </div>\n        )}\n      </motion.div>\n    );\n  }\n);\n\nSheetHeader.displayName = 'SheetHeader';\n","import React, { forwardRef } from 'react';\nimport { motion } from 'motion/react';\n\nimport { type SheetBackdropProps } from './types';\nimport { styles } from './styles';\n\nconst isClickable = (props: any) => !!props.onClick || !!props.onTap;\n\nexport const SheetBackdrop = forwardRef<any, SheetBackdropProps>(\n  ({ style = {}, className = '', ...rest }, ref) => {\n    const Comp = isClickable(rest) ? motion.button : motion.div;\n    const pointerEvents = isClickable(rest) ? 'auto' : 'none';\n\n    return (\n      <Comp\n        {...rest}\n        ref={ref}\n        className={`react-modal-sheet-backdrop ${className}`}\n        style={{ ...styles.backdrop, ...style, pointerEvents }}\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        exit={{ opacity: 0 }}\n      />\n    );\n  }\n);\n\nSheetBackdrop.displayName = 'SheetBackdrop';\n","import React, { type TouchEvent, type UIEvent, forwardRef } from 'react';\n\nimport { useSheetScrollerContext } from './context';\nimport { type SheetScrollerProps } from './types';\nimport { isTouchDevice } from './utils';\nimport { styles } from './styles';\n\nexport const SheetScroller = forwardRef<any, SheetScrollerProps>(\n  ({ draggableAt = 'top', children, style, className = '', ...rest }, ref) => {\n    const sheetScrollerContext = useSheetScrollerContext();\n\n    function determineDragState(element: HTMLDivElement) {\n      const { scrollTop, scrollHeight, clientHeight } = element;\n      const isScrollable = scrollHeight > clientHeight;\n\n      if (!isScrollable) return;\n\n      const isAtTop = scrollTop <= 0;\n      const isAtBottom = scrollHeight - scrollTop === clientHeight;\n\n      const shouldEnable =\n        (draggableAt === 'top' && isAtTop) ||\n        (draggableAt === 'bottom' && isAtBottom) ||\n        (draggableAt === 'both' && (isAtTop || isAtBottom));\n\n      if (shouldEnable) {\n        sheetScrollerContext.setDragEnabled();\n      } else {\n        sheetScrollerContext.setDragDisabled();\n      }\n    }\n\n    function onScroll(e: UIEvent<HTMLDivElement>) {\n      determineDragState(e.currentTarget);\n      if (rest.onScroll) {\n        rest.onScroll(e);\n      }\n    }\n\n    function onTouchStart(e: TouchEvent<HTMLDivElement>) {\n      determineDragState(e.currentTarget);\n      if (rest.onTouchStart) {\n        rest.onTouchStart(e);\n      }\n    }\n\n    const scrollProps = isTouchDevice()\n      ? { onScroll, onTouchStart }\n      : undefined;\n\n    return (\n      <div\n        {...rest}\n        ref={ref}\n        className={`react-modal-sheet-scroller ${className}`}\n        style={{ ...styles.scroller, ...style }}\n        {...scrollProps}\n      >\n        {children}\n      </div>\n    );\n  }\n);\n\nSheetScroller.displayName = 'SheetScroller';\n","import type { MotionValue } from 'motion/react';\n\nimport type { SheetCompound, SheetDraggableProps } from './types';\nimport { Sheet as SheetBase } from './sheet';\nimport { SheetContainer } from './SheetContainer';\nimport { SheetContent } from './SheetContent';\nimport { SheetHeader } from './SheetHeader';\nimport { SheetBackdrop } from './SheetBackdrop';\nimport { SheetScroller } from './SheetScroller';\n\nexport interface SheetRef {\n  y: MotionValue<number>;\n  snapTo: (index: number) => void;\n}\n\nexport const Sheet: SheetCompound = Object.assign(SheetBase, {\n  Container: SheetContainer,\n  Header: SheetHeader,\n  Content: SheetContent,\n  Backdrop: SheetBackdrop,\n  Scroller: SheetScroller,\n});\n\n// Export types\nexport type SheetHeaderProps = SheetDraggableProps;\nexport type SheetContentProps = SheetDraggableProps;\nexport type {\n  SheetProps,\n  SheetBackdropProps,\n  SheetScrollerProps,\n  SheetContainerProps,\n} from './types';\n"]}